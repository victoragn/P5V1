{% extends "@AgnezCore/layout.html.twig" %}

{% block body %}
    <button><a href="{{ path('agnez_core_homepage',{'sem' : numSem - 1}) }}">Semaine précedente</a></button>
    <button><a href="{{ path('agnez_core_homepage',{'sem' : numSem + 1}) }}">Semaine suivante</a></button>
    <table>
        <tr>
            <th></th>
            <th>Lundi</th>
            <th>Mardi</th>
            <th>Mercredi</th>
            <th>Jeudi</th>
            <th>Vendredi</th>
        </tr>
        {% set colonne1 = ['8h-9h','9h-10h','10h-11h','11h-12h','14h-15h','15h-16h','16h-17h','17h-18h'] %}
        {% for i in  1..8 %}
        <tr>
            <td>{{colonne1[i-1]}}</td>
            {% for j in  1..5 %}

                    {% set hTrouvee = '' %}
                    {% for heure in listeHeures%}
                        {% if heure.numHeure==j*10+i %}
                            {% set hTrouvee = heure %}
                        {% endif %}
                    {% endfor %}
                    {% if hTrouvee !='' %}
                        <td><a href="{{ path('agnez_core_homepage',{'sem' : numSem, 'numHeure' : hTrouvee.id}) }}">{{hTrouvee.classe.name}}</a></td>
                    {% else %}
                        <td></td>
                    {% endif %}

            {% endfor %}
        </tr>
        {% endfor %}
    </table>

    {% if form is defined %}
        {{ form_start(form) }}
        {{ form_errors(form) }}
        <table>
            <tr>
            {%for k in 1..heureSelec.classe.eleves|length %}

                <td>{{ form_row(attribute(form.tabOubliClasse, 'oubli' ~ k ) ) }}</td>

                {% if k is divisibleby(2)%}
                    {% if k is divisibleby(6 )%}
                        </tr><tr>
                    {% else %}
                        <td class='couloirClasse'></td>
                    {% endif %}
                {% endif %}

            {% endfor %}
            </tr>
        </table>
        {{ form_widget(form.tabOubliClasse.save, { 'label': 'Enregistrer les oublis' }) }}
        {{ form_end(form) }}
    {% endif %}


    <button><a href="{{ path('agnez_core_classes') }}">Définir les classes</a></button>
    <button><a href="{{ path('agnez_core_eleves') }}">Définir les élèves</a></button>
    <button><a href="{{ path('agnez_core_edt') }}">Définir l'emploi du temps</a></button>
    <button><a href="{{ path('agnez_core_edt_init') }}">Lancer l'initialisation de l'emploi du temps sur l'année complète (attention les anciennes heures seront effacées)</a></button>

{% endblock %}
